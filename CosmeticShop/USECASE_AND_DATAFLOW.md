# ğŸ”„ CosmeticShop - SÆ¡ Äá»“ Use Case vÃ  Luá»“ng Dá»¯ Liá»‡u

## Má»¤C Lá»¤C
1. [Use Case Diagrams](#1-use-case-diagrams)
2. [Detailed Use Cases](#2-detailed-use-cases)
3. [Data Flow Diagrams](#3-data-flow-diagrams)
4. [User Stories](#4-user-stories)

---

## 1. USE CASE DIAGRAMS

### 1.1 Use Case Tá»•ng Quan Há»‡ Thá»‘ng

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        COSMETIC SHOP SYSTEM                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚   Guest User   â”‚         â”‚  Authenticated â”‚                   â”‚
â”‚  â”‚                â”‚         â”‚     User       â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚           â”‚                          â”‚                            â”‚
â”‚           â”‚ Browse Products          â”‚ Manage Profile            â”‚
â”‚           â”‚ View Product Details     â”‚ Manage Addresses          â”‚
â”‚           â”‚ Search Products          â”‚ View Order History        â”‚
â”‚           â”‚                         â”‚ Manage Cart               â”‚
â”‚           â”‚                          â”‚ Checkout                  â”‚
â”‚           â”‚                          â”‚ Apply Discount            â”‚
â”‚           â”‚                          â”‚ Payment                   â”‚
â”‚           â”‚                          â”‚ Track Orders              â”‚
â”‚           â”‚                          â”‚ Request Password Reset    â”‚
â”‚           â”‚                          â”‚                           â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                       â”‚                                          â”‚
â”‚                       â”‚ Register/Login                           â”‚
â”‚                       â”‚                                         â”‚
â”‚                  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚                  â”‚      Admin User        â”‚                      â”‚
â”‚                  â”‚                        â”‚                      â”‚
â”‚                  â”‚ Manage Products        â”‚                      â”‚
â”‚                  â”‚ Manage Categories      â”‚                      â”‚
â”‚                  â”‚ Manage Orders          â”‚                      â”‚
â”‚                  â”‚ Manage Users           â”‚                      â”‚
â”‚                  â”‚ Manage Discounts       â”‚                      â”‚
â”‚                  â”‚ View Reports           â”‚                      â”‚
â”‚                  â”‚ Configure Settings     â”‚                      â”‚
â”‚                  â”‚                        â”‚                      â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 Use Case - User (NgÆ°á»i DÃ¹ng)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          USER ACTOR                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                               â”‚
â”‚  â”‚  Register   â”‚â—„â”€â”€ Create account                             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                               â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                               â”‚
â”‚  â”‚    Login    â”‚â—„â”€â”€ Authenticate                               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                               â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚  â”‚  Manage Account        â”‚                                    â”‚
â”‚  â”‚  - View Profile        â”‚                                    â”‚
â”‚  â”‚  - Update Info         â”‚                                    â”‚
â”‚  â”‚  - Change Password     â”‚                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚  â”‚  Browse Products       â”‚                                    â”‚
â”‚  â”‚  - View Product List   â”‚                                    â”‚
â”‚  â”‚  - View Details        â”‚                                    â”‚
â”‚  â”‚  - Search              â”‚                                    â”‚
â”‚  â”‚  - Filter by Category  â”‚                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚  â”‚  Manage Cart           â”‚                                    â”‚
â”‚  â”‚  - Add to Cart         â”‚                                    â”‚
â”‚  â”‚  - Update Quantity     â”‚                                    â”‚
â”‚  â”‚  - Remove from Cart    â”‚                                    â”‚
â”‚  â”‚  - View Cart           â”‚                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚  â”‚  Manage Addresses      â”‚                                    â”‚
â”‚  â”‚  - Add Address         â”‚                                    â”‚
â”‚  â”‚  - Edit Address        â”‚                                    â”‚
â”‚  â”‚  - Delete Address      â”‚                                    â”‚
â”‚  â”‚  - Set Default         â”‚                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚  â”‚  Checkout              â”‚                                    â”‚
â”‚  â”‚  - Select Items        â”‚                                    â”‚
â”‚  â”‚  - Select Address      â”‚                                    â”‚
â”‚  â”‚  - Select Shipping     â”‚                                    â”‚
â”‚  â”‚  - Apply Discount      â”‚                                    â”‚
â”‚  â”‚  - Review Order        â”‚                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚  â”‚  Payment               â”‚                                    â”‚
â”‚  â”‚  - VNPay               â”‚                                    â”‚
â”‚  â”‚  - Bank Transfer       â”‚                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚  â”‚  Manage Orders         â”‚                                    â”‚
â”‚  â”‚  - View Orders         â”‚                                    â”‚
â”‚  â”‚  - View Order Details  â”‚                                    â”‚
â”‚  â”‚  - Track Order         â”‚                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚  â”‚  Manage Discounts      â”‚                                    â”‚
â”‚  â”‚  - View Available      â”‚                                    â”‚
â”‚  â”‚  - Apply to Order      â”‚                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.3 Use Case - Admin (Quáº£n Trá»‹ ViÃªn)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ADMIN ACTOR                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚  â”‚  Manage Products       â”‚                                    â”‚
â”‚  â”‚  - Create Product      â”‚                                    â”‚
â”‚  â”‚  - Update Product      â”‚                                    â”‚
â”‚  â”‚  - Delete Product      â”‚                                    â”‚
â”‚  â”‚  - Upload Images       â”‚                                    â”‚
â”‚  â”‚  - Search Products     â”‚                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚  â”‚  Manage Categories     â”‚                                    â”‚
â”‚  â”‚  - Create Category     â”‚                                    â”‚
â”‚  â”‚  - Update Category     â”‚                                    â”‚
â”‚  â”‚  - Delete Category     â”‚                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚  â”‚  Manage Orders         â”‚                                    â”‚
â”‚  â”‚  - View All Orders     â”‚                                    â”‚
â”‚  â”‚  - Filter Orders       â”‚                                    â”‚
â”‚  â”‚  - Update Status       â”‚                                    â”‚
â”‚  â”‚  - View Details        â”‚                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚  â”‚  Manage Users          â”‚                                    â”‚
â”‚  â”‚  - View Users          â”‚                                    â”‚
â”‚  â”‚  - Change Role         â”‚                                    â”‚
â”‚  â”‚  - Block/Unblock User  â”‚                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚  â”‚  Manage Discounts      â”‚                                    â”‚
â”‚  â”‚  - Create Discount     â”‚                                    â”‚
â”‚  â”‚  - Update Discount     â”‚                                    â”‚
â”‚  â”‚  - Delete Discount     â”‚                                    â”‚
â”‚  â”‚  - Set Auto-Assign     â”‚                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚  â”‚  View Dashboard        â”‚                                    â”‚
â”‚  â”‚  - Sales Statistics    â”‚                                    â”‚
â”‚  â”‚  - Order Statistics    â”‚                                    â”‚
â”‚  â”‚  - User Statistics     â”‚                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚  â”‚  View Reports          â”‚                                    â”‚
â”‚  â”‚  - Sales Report        â”‚                                    â”‚
â”‚  â”‚  - Product Report      â”‚                                    â”‚
â”‚  â”‚  - User Report         â”‚                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.4 Use Case - Há»‡ Thá»‘ng (System Actors)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       SYSTEM ACTORS                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚
â”‚  â”‚  Payment Gateway     â”‚                                      â”‚
â”‚  â”‚  (VNPay)             â”‚                                      â”‚
â”‚  â”‚  - Process Payment   â”‚                                      â”‚
â”‚  â”‚  - Return Response   â”‚                                      â”‚
â”‚  â”‚  - IPN Callback      â”‚                                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚
â”‚  â”‚  Email Service       â”‚                                      â”‚
â”‚  â”‚  (SMTP)              â”‚                                      â”‚
â”‚  â”‚  - Send Password     â”‚                                      â”‚
â”‚  â”‚    Reset Email       â”‚                                      â”‚
â”‚  â”‚  - Send Notificationsâ”‚                                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚
â”‚  â”‚  Database            â”‚                                      â”‚
â”‚  â”‚  (SQL Server)        â”‚                                      â”‚
â”‚  â”‚  - Store Data        â”‚                                      â”‚
â”‚  â”‚  - Execute Queries   â”‚                                      â”‚
â”‚  â”‚  - Run Procedures    â”‚                                      â”‚
â”‚  â”‚  - Trigger Events    â”‚                                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. DETAILED USE CASES

### 2.1 UC-001: User Registration

**Actor**: Guest User  
**Precondition**: User chÆ°a cÃ³ tÃ i khoáº£n  
**Main Flow**:
1. User truy cáº­p trang Ä‘Äƒng kÃ½
2. User nháº­p thÃ´ng tin (email, username, password)
3. Há»‡ thá»‘ng validate thÃ´ng tin
4. Há»‡ thá»‘ng kiá»ƒm tra email Ä‘Ã£ tá»“n táº¡i chÆ°a
5. Náº¿u chÆ°a tá»“n táº¡i â†’ Táº¡o tÃ i khoáº£n má»›i
6. User Ä‘Æ°á»£c táº¡o vá»›i role = "USER"
7. Redirect Ä‘áº¿n trang Ä‘Äƒng nháº­p
8. Use case káº¿t thÃºc

**Alternative Flow**:
- 4a. Email Ä‘Ã£ tá»“n táº¡i â†’ Hiá»ƒn thá»‹ lá»—i, yÃªu cáº§u dÃ¹ng email khÃ¡c
- 3a. Validation fail â†’ Hiá»ƒn thá»‹ lá»—i cá»¥ thá»ƒ

**Postcondition**: TÃ i khoáº£n má»›i Ä‘Æ°á»£c táº¡o trong database

---

### 2.2 UC-002: User Login

**Actor**: User  
**Precondition**: User Ä‘Ã£ cÃ³ tÃ i khoáº£n  
**Main Flow**:
1. User truy cáº­p trang Ä‘Äƒng nháº­p
2. User nháº­p email vÃ  password
3. Há»‡ thá»‘ng validate credentials
4. Táº¡o session cho user
5. LÆ°u user object vÃ o session
6. Redirect Ä‘áº¿n trang chá»§
7. Use case káº¿t thÃºc

**Alternative Flow**:
- 3a. Credentials sai â†’ Hiá»ƒn thá»‹ lá»—i "Email hoáº·c máº­t kháº©u khÃ´ng Ä‘Ãºng"
- 4a. Session timeout (30 min) â†’ YÃªu cáº§u Ä‘Äƒng nháº­p láº¡i

**Postcondition**: User Ä‘Ã£ Ä‘Äƒng nháº­p, session Ä‘Æ°á»£c táº¡o

---

### 2.3 UC-003: Browse Products

**Actor**: User, Guest  
**Precondition**: KhÃ´ng cáº§n Ä‘Äƒng nháº­p  
**Main Flow**:
1. User truy cáº­p trang sáº£n pháº©m
2. Há»‡ thá»‘ng load danh sÃ¡ch sáº£n pháº©m tá»« database
3. Hiá»ƒn thá»‹ danh sÃ¡ch sáº£n pháº©m vá»›i áº£nh, tÃªn, giÃ¡
4. User cÃ³ thá»ƒ click vÃ o sáº£n pháº©m Ä‘á»ƒ xem chi tiáº¿t
5. User cÃ³ thá»ƒ search hoáº·c filter
6. Use case káº¿t thÃºc

**Alternative Flow**:
- 4a. Click sáº£n pháº©m â†’ Redirect Ä‘áº¿n trang chi tiáº¿t (UC-004)
- 5a. Search â†’ Load káº¿t quáº£ tÃ¬m kiáº¿m
- 5b. Filter by category â†’ Load sáº£n pháº©m theo danh má»¥c

**Postcondition**: User xem Ä‘Æ°á»£c danh sÃ¡ch sáº£n pháº©m

---

### 2.4 UC-004: View Product Details

**Actor**: User, Guest  
**Precondition**: User Ä‘Ã£ chá»n má»™t sáº£n pháº©m  
**Main Flow**:
1. User click vÃ o sáº£n pháº©m
2. Há»‡ thá»‘ng load chi tiáº¿t sáº£n pháº©m (name, price, description, stock)
3. Há»‡ thá»‘ng load táº¥t cáº£ áº£nh cá»§a sáº£n pháº©m
4. Hiá»ƒn thá»‹ thÃ´ng tin chi tiáº¿t vá»›i gallery áº£nh
5. User cÃ³ thá»ƒ thÃªm vÃ o giá» hÃ ng
6. Use case káº¿t thÃºc

**Alternative Flow**:
- 5a. ThÃªm vÃ o giá» â†’ Thá»±c hiá»‡n UC-005
- 3a. Sáº£n pháº©m háº¿t hÃ ng â†’ Hiá»ƒn thá»‹ "Out of Stock"

**Postcondition**: User xem Ä‘Æ°á»£c chi tiáº¿t sáº£n pháº©m

---

### 2.5 UC-005: Add to Cart

**Actor**: Authenticated User  
**Precondition**: User Ä‘Ã£ Ä‘Äƒng nháº­p, sáº£n pháº©m cÃ²n tá»“n kho  
**Main Flow**:
1. User click "ThÃªm vÃ o giá» hÃ ng" táº¡i trang chi tiáº¿t
2. Há»‡ thá»‘ng láº¥y cart cá»§a user (hoáº·c táº¡o má»›i náº¿u chÆ°a cÃ³)
3. Kiá»ƒm tra sáº£n pháº©m Ä‘Ã£ cÃ³ trong cart chÆ°a
4. Náº¿u Ä‘Ã£ cÃ³ â†’ TÄƒng quantity
5. Náº¿u chÆ°a cÃ³ â†’ ThÃªm item má»›i
6. Há»‡ thá»‘ng kiá»ƒm tra sá»‘ lÆ°á»£ng khÃ´ng vÆ°á»£t quÃ¡ stock
7. LÆ°u vÃ o database
8. Hiá»ƒn thá»‹ thÃ´ng bÃ¡o thÃ nh cÃ´ng
9. Use case káº¿t thÃºc

**Alternative Flow**:
- 6a. Quantity > stock â†’ Hiá»ƒn thá»‹ lá»—i, giá»›i háº¡n sá»‘ lÆ°á»£ng
- 1a. ChÆ°a Ä‘Äƒng nháº­p â†’ Redirect Ä‘áº¿n trang Ä‘Äƒng nháº­p

**Postcondition**: Sáº£n pháº©m Ä‘Æ°á»£c thÃªm vÃ o giá» hÃ ng

---

### 2.6 UC-006: Checkout Process

**Actor**: Authenticated User  
**Precondition**: User cÃ³ Ã­t nháº¥t 1 item trong giá» hÃ ng  
**Main Flow**:
1. User click "Thanh toÃ¡n" tá»« giá» hÃ ng
2. Há»‡ thá»‘ng load cÃ¡c items Ä‘Ã£ chá»n trong cart
3. Há»‡ thá»‘ng load Ä‘á»‹a chá»‰ giao hÃ ng cá»§a user
4. Há»‡ thá»‘ng load danh sÃ¡ch phÆ°Æ¡ng thá»©c váº­n chuyá»ƒn
5. User chá»n/Ä‘iá»n Ä‘á»‹a chá»‰ giao hÃ ng
6. User chá»n phÆ°Æ¡ng thá»©c váº­n chuyá»ƒn
7. Há»‡ thá»‘ng tÃ­nh tá»•ng tiá»n (subtotal + shipping - discount)
8. User chá»n mÃ£ giáº£m giÃ¡ (optional)
9. User xem tá»•ng káº¿t vÃ  xÃ¡c nháº­n
10. Click "Äáº·t hÃ ng"
11. Há»‡ thá»‘ng táº¡o Ä‘Æ¡n hÃ ng vÃ  chi tiáº¿t
ãƒ¼. Use case káº¿t thÃºc

**Alternative Flow**:
- 3a. ChÆ°a cÃ³ Ä‘á»‹a chá»‰ â†’ YÃªu cáº§u thÃªm Ä‘á»‹a chá»‰ má»›i
- 8a. Chá»n mÃ£ giáº£m giÃ¡ â†’ Validate vÃ  apply (UC-009)
- 10a. CÃ³ sáº£n pháº©m háº¿t hÃ ng â†’ Hiá»ƒn thá»‹ lá»—i, cáº­p nháº­t giá» hÃ ng

**Postcondition**: ÄÆ¡n hÃ ng Ä‘Æ°á»£c táº¡o vá»›i status = "PENDING"

---

### 2.7 UC-007: Payment via VNPay

**Actor**: User, VNPay Gateway  
**Precondition**: ÄÆ¡n hÃ ng Ä‘Ã£ Ä‘Æ°á»£c táº¡o  
**Main Flow**:
1. User chá»n "Thanh toÃ¡n VNPay" táº¡i checkout
2. Há»‡ thá»‘ng gá»i `VnPayCreateServlet`
3. Há»‡ thá»‘ng táº¡o payment request vá»›i thÃ´ng tin Ä‘Æ¡n hÃ ng
4. Há»‡ thá»‘ng kÃ½ tÃªn (signature) cho war tranh request
5. Redirect user Ä‘áº¿n trang thanh toÃ¡n VNPay
6. User thanh toÃ¡n trÃªn VNPay
7. VNPay xá»­ lÃ½ thanh toÃ¡n
8. VNPay redirect vá» `/payment/vnpay/return`
9. Há»‡ thá»‘ng nháº­n vÃ  verify signature
10. Há»‡ thá»‘ng kiá»ƒm tra payment status
11. Náº¿u thÃ nh cÃ´ng â†’ Update order status = "PAID"
12. Redirect Ä‘áº¿n trang xÃ¡c nháº­n Ä‘Æ¡n hÃ ng
13. Use case káº¿t thÃºc

**Alternative Flow**:
- 11a. Thanh toÃ¡n tháº¥t báº¡i â†’ Hiá»ƒn thá»‹ lá»—i, giá»¯ Ä‘Æ¡n hÃ ng á»Ÿ tráº¡ng thÃ¡i PENDING
- 9a. Signature khÃ´ng há»£p lá»‡ â†’ Tá»« chá»‘i giao dá»‹ch

**Postcondition**: ÄÆ¡n hÃ ng Ä‘Æ°á»£c thanh toÃ¡n vÃ  cáº­p nháº­t trong database

---

### 2.8 UC-008: View Order History

**Actor**: Authenticated User  
**Precondition**: User Ä‘Ã£ Ä‘Äƒng nháº­p  
**Main Flow**:
1. User click "Lá»‹ch sá»­ Ä‘Æ¡n hÃ ng"
2. Há»‡ thá»‘ng truy váº¥n táº¥t cáº£ Ä‘Æ¡n hÃ ng cá»§a user
3. Hiá»ƒn thá»‹ danh sÃ¡ch Ä‘Æ¡n hÃ ng vá»›i:
   - Order ID, NgÃ y Ä‘áº·t, Tá»•ng tiá»n
   - Status, Payment status
   - áº¢nh sáº£n pháº©m Ä‘áº§u tiÃªn
4. User cÃ³ thá»ƒ click Ä‘á»ƒ xem chi tiáº¿t
5. Use case káº¿t thÃºc

**Alternative Flow**:
- 4a. Click chi tiáº¿t â†’ Hiá»ƒn thá»‹ Ä‘áº§y Ä‘á»§ thÃ´ng tin Ä‘Æ¡n hÃ ng

**Postcondition**: User xem Ä‘Æ°á»£c lá»‹ch sá»­ Ä‘Æ¡n hÃ ng cá»§a lucky

---

### 2.9 UC-009: Apply Discount

**Actor**: Authenticated User  
**Precondition**: User Ä‘ang á»Ÿ trang checkout  
**Main Flow**:
1. User nháº­p mÃ£ giáº£m giÃ¡
2. Click "Ãp dá»¥ng"
3. Há»‡ thá»‘ng validate mÃ£ giáº£m giÃ¡:
   - MÃ£ cÃ³ tá»“n táº¡i khÃ´ng?
   - MÃ£ cÃ²n hiá»‡u lá»±c khÃ´ng?
   - User Ä‘Ã£ Ä‘á»§ Ä‘iá»u kiá»‡n chÆ°a?
   - ÄÃ£ Ä‘áº¡t minimum order chÆ°a?
4. Náº¿u há»£p lá»‡ â†’ TÃ­nh discount amount
5. Ãp dá»¥ng discount vÃ o tá»•ng tiá»n
6. Hiá»ƒn thá»‹ discount info vÃ  tá»•ng má»›i
7. Use case káº¿t thÃºc

**Alternative Flow**:
- 3a. MÃ£ khÃ´ng há»£p lá»‡ â†’ Hiá»ƒn thá»‹ lá»—i cá»¥ thá»ƒ
- 4a. Discount type = PERCENTAGE â†’ TÃ­nh theo %
- 4b. Discount type = FIXED_AMOUNT â†’ Trá»« tháº³ng

**Postcondition**: MÃ£ giáº£m giÃ¡ Ä‘Æ°á»£c Ã¡p dá»¥ng vÃ o Ä‘Æ¡n hÃ ng

---

### 2.10 UC-010: Admin Manage Products

**Actor**: Admin  
**Precondition**: Admin Ä‘Ã£ Ä‘Äƒng nháº­p  
**Main Flow**:
1. Admin truy cáº­p "Quáº£n lÃ½ sáº£n pháº©m"
2. Há»‡ thá»‘ng hiá»ƒn thá»‹ danh sÃ¡ch sáº£n pháº©m
3. Admin cÃ³ thá»ƒ:
   - Táº¡o sáº£n pháº©m má»›i (nháº­p thÃ´ng tin, upload áº£nh)
   - Sá»­a sáº£n pháº©m
   - XÃ³a sáº£n pháº©m
   - TÃ¬m kiáº¿m sáº£n pháº©m
4. Admin submit form
5. Há»‡ thá»‘ng validate vÃ  lÆ°u vÃ o database
6. Cáº­p nháº­t hiá»ƒn thá»‹
7. Use case káº¿t thÃºc

**Alternative Flow**:
- 3b. Upload áº£nh â†’ LÆ°u vÃ o IMG folder vÃ  database
- 5a. Validation fail â†’ Hiá»ƒn thá»‹ lá»—i

**Postcondition**: Sáº£n pháº©m Ä‘Æ°á»£c cáº­p nháº­t trong database

---

### 2.11 UC-011: Admin Manage Orders

**Actor**: Admin  
**Precondition**: Admin Ä‘Ã£ Ä‘Äƒng nháº­p  
**Main Flow**:
1. Admin truy cáº­p "Quáº£n lÃ½ Ä‘Æ¡n hÃ ng"
2. Há»‡ thá»‘ng load táº¥t cáº£ Ä‘Æ¡n hÃ ng
3. Admin cÃ³ thá»ƒ filter theo:
   - Status (PENDING, PROCESSING, SHIPPED, DELIVERED, CANCELLED)
   - Date (Today, Date Range)
   - Customer name
4. Admin click vÃ o Ä‘Æ¡n hÃ ng Ä‘á»ƒ xem chi tiáº¿t
5. Admin cáº­p nháº­t order status
6. Há»‡ thá»‘ng cáº­p nháº­t database
7. Use case káº¿t thÃºc

**Alternative Flow**:
- 5a. Cáº­p nháº­t status = SHIPPED â†’ Nháº­p tracking number

**Postcondition**: Tráº¡ng thÃ¡i Ä‘Æ¡n hÃ ng Ä‘Æ°á»£c cáº­p nháº­t

---

### 2.12 UC-012: Auto-Assign Vouchers

**Actor**: System (Trigger)  
**Precondition**: User hoÃ n thÃ nh Ä‘Æ¡n hÃ ng  
**Main Flow**:
1. Order status chuyá»ƒn thÃ nh "COMPLETED"
2. Trigger `tr_OrderCreated_AssignVouchers` Ä‘Æ°á»£c kÃ­ch hoáº¡t
3. Gá»i stored procedure `sp_CheckAndAssignVouchers`
4. System kiá»ƒm tra cÃ¡c Ä‘iá»u kiá»‡n voucher:
   - TOTAL_SPENT: Tá»•ng tiá»n Ä‘Ã£ chi >= giÃ¡ trá»‹
   - ORDER_COUNT: Sá»‘ Ä‘Æ¡n hÃ ng >= giÃ¡ trá»‹
   - FIRST_ORDER: ÄÃ¢y lÃ  Ä‘Æ¡n hÃ ng Ä‘áº§u tiÃªn
5. Náº¿u Ä‘á»§ Ä‘iá»u kiá»‡n â†’ GÃ¡n voucher cho user
6. User nháº­n Ä‘Æ°á»£c voucher trong "My Discounts"
7. Use case káº¿t thÃºc

**Postcondition**: User cÃ³ voucher má»›i (náº¿u Ä‘á»§ Ä‘iá»u kiá»‡n)

---

## 3. DATA FLOW DIAGRAMS

### 3.1 DFD Level 0 - Context Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        SYSTEM BOUNDARY                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        Products        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  User    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ CosmeticShop â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                        â”‚   System     â”‚         â”‚
â”‚       â”‚                               â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚       â”‚              Orders                  â”‚                 â”‚
â”‚       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚
â”‚       â”‚                                       â”‚                 â”‚
â”‚       â”‚              Payment Requests         â”‚                 â”‚
â”‚       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚
â”‚       â”‚                                       â”‚                 â”‚
â”‚       â”‚              Admin Requests           â”‚                 â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                              â”‚                  â”‚
â”‚                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚                           â”‚                  â”‚              â”‚   â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    â”‚SQL Server    â”‚  â”‚ VNPay       â”‚ â”‚ Email       â”‚
â”‚                    â”‚Database      â”‚  â”‚ Gateway     â”‚ â”‚ Service     â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 DFD Level 1 - Main Processes

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        COSMETIC SHOP SYSTEM                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚  â”‚ 1.0 User         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚    Management    â”‚  â”‚ 2.0 Product      â”‚                   â”‚
â”‚  â”‚                  â”‚  â”‚    Browsing      â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚           â”‚                     â”‚                              â”‚
â”‚           â”‚                     â”‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ 1.1 Login        â”‚  â”‚ 2.1 View Productsâ”‚                   â”‚
â”‚  â”‚ 1.2 Register     â”‚  â”‚ 2.2 Search       â”‚                   â”‚
â”‚  â”‚ 1.3 Update Profileâ”‚  â”‚ 2.3 View Detailsâ”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚           â”‚                     â”‚                              â”‚
â”‚           â”‚                     â”‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ 3.0 Shopping Cart Management           â”‚                   â”‚
â”‚  â”‚ 3.1 Add to Cart                        â”‚                   â”‚
â”‚  â”‚ 3.2 Update Quantity                    â”‚                   â”‚
â”‚  â”‚ 3.3 Remove from Cart                   â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚           â”‚                                                    â”‚
â”‚           â”‚                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          â”‚
â”‚  â”‚ 4.0 Checkout     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ 4.1 Select Items â”‚  â”‚ 5.0 Payment      â”‚                   â”‚
â”‚  â”‚ 4.2 Enter Addressâ”‚  â”‚ 5.1 Create Order â”‚                   â”‚
â”‚  â”‚ 4.3 Apply Discountâ”‚ â”‚ 5.2 Process Payment                  â”‚
â”‚  â”‚ 4.4 Review Order â”‚  â”‚ 5.3 VNPay Callback                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚           â”‚                     â”‚                              â”‚
â”‚           â”‚                     â”‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ 6.0 Order Management                   â”‚                   â”‚
â”‚  â”‚ 6.1 View Order History                 â”‚                   â”‚
â”‚  â”‚ 6.2 Track Order                        â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚           â”‚                                                    â”‚
â”‚           â”‚                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          â”‚
â”‚  â”‚ 7.0 Admin        â”‚                                          â”‚
â”‚  â”‚    Functions     â”‚                                          â”‚
â”‚  â”‚ 7.1 Manage Products                                          â”‚
â”‚  â”‚ 7.2 Manage Orders                                           â”‚
â”‚  â”‚ 7.3 Manage Users                                            â”‚
â”‚  â”‚ 7.4 Manage Discounts                                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                          â”‚
â”‚           â”‚                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”‚ Data Stores:
            â”‚ D1: Users
            â”‚ D2: Products
            â”‚ D3: Orders
            â”‚ D4: Cart
            â”‚ D5: Discounts
            â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Database     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 DFD Level 2 - Checkout Process

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              4.0 CHECKOUT PROCESS                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚  â”‚4.1 Validate   â”‚                                        â”‚
â”‚  â”‚   Cart Items  â”‚                                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚          â”‚                                                â”‚
â”‚          â–¼                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   Read Shipping     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚4.2 Load       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚D4: Shipping â”‚   â”‚
â”‚  â”‚   Shipping    â”‚                     â”‚Addresses    â”‚   â”‚
â”‚  â”‚   Addresses   â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚          â”‚                                                â”‚
â”‚          â–¼                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   Read Methods      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚4.3 Load       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚D6: Shipping â”‚   â”‚
â”‚  â”‚   Shipping    â”‚                     â”‚Methods      â”‚   â”‚
â”‚  â”‚   Methods     â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚          â”‚                                                â”‚
â”‚          â–¼                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   Calculate Total   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚4.4 Calculate  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚D2: Products â”‚   â”‚
â”‚  â”‚   Subtotal    â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚          â”‚                                                â”‚
â”‚          â–¼                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚  â”‚4.5 Apply      â”‚                                        â”‚
â”‚  â”‚   Discount    â”‚                                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   Read Discounts    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚          â”‚         â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚D5: Discountsâ”‚   â”‚
â”‚          â”‚                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚          â–¼                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚  â”‚4.6 Calculate  â”‚                                        â”‚
â”‚  â”‚   Final Total â”‚                                        â”‚
â”‚  â”‚   (+Shipping) â”‚                                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚          â”‚                                                â”‚
â”‚          â–¼                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   Write Order       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚4.7 Create     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚D3: Orders   â”‚   â”‚
â”‚  â”‚   Order       â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚          â”‚                                                â”‚
â”‚          â–¼                                                â”‚
â”‚  5.0 Payment                                              â”‚
â”‚                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.4 DFD Level 2 - Payment Process

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              5.0 PAYMENT PROCESS                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚  â”‚5.1 Create     â”‚                                        â”‚
â”‚  â”‚   Payment     â”‚                                        â”‚
â”‚  â”‚   Request     â”‚                                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚          â”‚                                                â”‚
â”‚          â–¼                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚  â”‚5.2 Build      â”‚                                        â”‚
â”‚  â”‚   VNPay URL   â”‚                                        â”‚
â”‚  â”‚   + Signature â”‚                                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚          â”‚                                                â”‚
â”‚          â–¼                                                â”‚
â”‚  Redirect to VNPay                                        â”‚
â”‚          â”‚                                                â”‚
â”‚          â–¼                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚  â”‚upa1 Pay on    â”‚                                        â”‚
â”‚  â”‚   VNPay       â”‚                                        â”‚
â”‚  â”‚   Gateway     â”‚                                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚          â”‚                                                â”‚
â”‚          â–¼                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   Update Order      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚5.3 Receive    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚D3: Orders   â”‚   â”‚
â”‚  â”‚   Callback    â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”‚   + Verify    â”‚                                        â”‚
â”‚  â”‚   Signature   â”‚                                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚          â”‚                                                â”‚
â”‚          â–¼                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   Send Email        Email Service     â”‚
â”‚  â”‚5.4 Send       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º                  â”‚
â”‚  â”‚   Confirmationâ”‚                       (optional)       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚          â”‚                                                â”‚
â”‚          â–¼                                                â”‚
â”‚  Redirect to Confirmation Page                            â”‚
â”‚                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.5 DFD Level 2 - Admin Process

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              7.0 ADMIN PROCESSES                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚  â”‚7.1 Manage     â”‚    Read/Write      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚   Products    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚D2: Products â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚  â”‚7.2 Manage     â”‚    Read/Write      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚   Orders      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚D3: Orders   â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚  â”‚7.3 Manage     â”‚    Read/Write      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚   Users       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚D1: Users    â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚  â”‚7.4 Manage     â”‚    Read/Write      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚   Categories  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚D8:          â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚Categories   â”‚     â”‚
â”‚                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚  â”‚7.5 Manage     â”‚    Read/Write      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚   Discounts   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚D5: Discountsâ”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚  â”‚7.6 Generate   â”‚    Read/Write      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚   Reports     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚D3: Orders   â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚D2: Products â”‚     â”‚
â”‚                                        â”‚D1: Users    â”‚     â”‚
â”‚                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. USER STORIES

### 4.1 â—‹User Stories (Epic 1: Authentication)

**US-001: User Registration**
```
As a guest user,
I want to create an account
So that I can shop and track my orders

Acceptance Criteria:
- User can register with email, username, and password
- Email must be unique
- Password must meet security requirements
- System creates account with role "USER"
- User receives confirmation
```

**US-002: User Login**
```
As a registered user,
I want to login to my account
So that I can access my profile and order history

Acceptance Criteria:
- User can login with email and password
- System creates session after successful login
- Session lasts 30 minutes
- User is redirected to home after login
```

**US-003: Password Reset**
```
As a user who forgot password,
I want to reset my password
So that I can regain access to my account

Acceptance Criteria:
- User can request password reset
- System sends reset email with token
- Token expires in 24 hours
- User can create new password
```

### 4.2 User Stories (Epic 2: Shopping)

**US-004: Browse Products**
```
As a customer,
I want to browse available products
So that I can find items to purchase

Acceptance Criteria:
- User sees list of products with images and prices
- User can click to view product details
- User can search for products
- User can filter by category
```

**US-005: View Product Details**
```
As a customer,
I want to view detailed information about a product
So that I can make informed purchase decisions

Acceptance Criteria:
- User sees product name, price, description, stock
- User sees all product images in gallery
- User sees related products (optional)
- Stock availability is shown
```

**US-006: Add to Cart**
```
As a logged-in customer,
I want to add products to my cart
So that I can buy multiple items together

Acceptance Criteria:
- User can add product to cart
- Quantity cannot exceed stock
- Cart persists across sessions
- Cart shows total items count
```

### 4.3 User Stories (Epic 3: Checkout)

**US-007: Checkout**
```
As a customer,
I want to checkout my cart
So that I can complete my purchase

Acceptance Criteria:
- User can review cart items
- User can select or add shipping address
- User can choose shipping method
- System calculates total including shipping
- User can apply discount codes
```

**US-008: Payment**
```
As a customer,
I want to pay for my order
So that I can receive my products

Acceptance Criteria:
- User can pay via VNPay
- User can pay via Bank Transfer
- Payment status is updated
- Order status becomes "PAID" after payment
- User receives confirmation
```

**US-009: Apply Discount**
```
As a customer,
I want to apply discount codes
So that I can save money on my purchase

Acceptance Criteria:
- User can enter discount code
- System validates code and conditions
- System applies discount to total
- Discount amount is clearly shown
- Invalid codes show error message
```

### 4.4 User Stories (Epic 4: Order Management)

**US-010: View Order History**
```
As a customer,
I want to view my order history
So that I can track my past purchases

Acceptance Criteria:
- User sees list of all past orders
- Each order shows order ID, date, total, status
- User can click to view order details
- Orders are sorted by date (newest first)
```

**US-011: Track Order**
```
As a customer,
I want to track my order status
So that I know when to expect my delivery

Acceptance Criteria:
- User sees current order status
- User sees estimated delivery date
- User can see tracking number (if shipped)
- Order statuses: PENDING, PROCESSING, SHIPPED, DELIVERED
```

### 4.5 User Stories (Epic 5: Admin)

**US-012: Manage Products**
```
As an admin,
I want to manage products
So that I can keep product information up-to-date

Acceptance Criteria:
- Admin can create new products
- Admin can edit existing products
- Admin can delete products
- Admin can upload multiple product images
- Admin can search and filter products
```

**US-013: Manage Orders**
```
As an admin,
I want to manage orders
So that I can process and fulfill customer orders

Acceptance Criteria:
- Admin sees all orders in system
- Admin can filter by status and date
- Admin can view order details
- Admin can update order status
- Admin can add tracking number
```

**US-014: Manage Discounts**
```
As an admin,
I want to create and manage discounts
So that I can run promotions and sales

Acceptance Criteria:
- Admin can create discount codes
- Admin can set conditions for auto-assignment
- Admin can set expiry dates
- Admin can view usage statistics
- Admin can enable/disable discounts
```

---

## 5. INTERACTION DIAGRAMS

### 5.1 Sequence Diagram - Complete Order Flow

```
User    Browser    Servlet    DAO       Database    VNPay
â”‚          â”‚          â”‚         â”‚          â”‚          â”‚
â”‚â”€â”€POSTâ”€â”€â”€â–ºâ”‚          â”‚         â”‚          â”‚          â”‚
â”‚  Add to â”‚          â”‚         â”‚          â”‚          â”‚
â”‚  Cart   â”‚          â”‚         â”‚          â”‚          â”‚
â”‚         â”‚          â”‚         â”‚          â”‚          â”‚
â”‚         â”‚â”€â”€POSTâ”€â”€â”€â–ºâ”‚         â”‚          â”‚          â”‚
â”‚         â”‚          â”‚â”€â”€SQLâ”€â”€â”€â–ºâ”‚          â”‚          â”‚
â”‚         â”‚          â”‚         â”‚â”€â”€definedâ”€â”€â–º         â”‚
â”‚         â”‚          â”‚         â”‚          â”‚          â”‚
â”‚         â”‚          â”‚â—„â”€â”€Resultâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚         â”‚â—„â”€â”€200â”€â”€â”€â”€â”‚         â”‚          â”‚          â”‚
â”‚â—„â”€Redirectâ”‚          â”‚         â”‚          â”‚          â”‚
â”‚          â”‚          â”‚         â”‚          â”‚          â”‚
â”‚â”€â”€â”€â”€â”     â”‚          â”‚         â”‚          â”‚          â”‚
â”‚    â”‚     â”‚          â”‚         â”‚          â”‚          â”‚
â”‚    â–¼     â”‚          â”‚         â”‚          â”‚          â”‚
â”‚ Checkout â”‚          â”‚         â”‚          â”‚          â”‚
â”‚    â”‚     â”‚          â”‚         â”‚          â”‚          â”‚
â”‚â”€â”€GETâ”€â”€â”€â”€â–ºâ”‚          â”‚         â”‚          â”‚          â”‚
â”‚          â”‚â”€â”€GETâ”€â”€â”€â”€â–ºâ”‚         â”‚          â”‚          â”‚
â”‚          â”‚          â”‚ fecthing          â”‚          â”‚
â”‚          â”‚          â”‚ cart itemsâ”‚          â”‚          â”‚
â”‚          â”‚          â”‚â”€â”€Queryâ”€â”€â–ºâ”‚          â”‚          â”‚
â”‚          â”‚          â”‚â—„â”€Dataâ”€â”€â”€â”‚          â”‚          â”‚
â”‚          â”‚â—„â”€cart.jspâ”‚         â”‚          â”‚          â”‚
â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚          â”‚         â”‚          â”‚          â”‚
â”‚ Fill Formâ”‚          â”‚         â”‚          â”‚          â”‚
â”‚    â”‚     â”‚          â”‚         â”‚          â”‚          â”‚
â”‚â”€â”€POSTâ”€â”€â”€â”€â–ºâ”‚          â”‚         â”‚          â”‚          â”‚
â”‚  Checkoutâ”‚          â”‚         â”‚          â”‚          â”‚
â”‚    â”‚     â”‚â”€â”€POSTâ”€â”€â”€â–ºâ”‚         â”‚          â”‚          â”‚
â”‚    â”‚     â”‚          â”‚ Create Orderâ”‚          â”‚          â”‚
â”‚    â”‚     â”‚          â”‚          â”‚â”€â”€INSERTâ”€â”€â–ºâ”‚          â”‚
â”‚    â”‚     â”‚          â”‚          â”‚â—„â”€â”€OKâ”€â”€â”€â”€â”€â”¤          â”‚
â”‚    â”‚     â”‚          â”‚          â”‚          â”‚          â”‚
â”‚    â”‚     â”‚          â”‚ Build    â”‚          â”‚          â”‚
â”‚    â”‚     â”‚          â”‚ Payment URL          â”‚          â”‚
â”‚    â”‚     â”‚â—„â”€redirectâ”‚          â”‚          â”‚          â”‚
â”‚    â”‚â—„â”€â”€â”€â”€â”‚          â”‚          â”‚          â”‚          â”‚
â”‚ Redirect â”‚          â”‚          â”‚          â”‚          â”‚
â”‚ to VNPay â”‚          â”‚          â”‚          â”‚          â”‚
â”‚    â”‚     â”‚          â”‚          â”‚          â”‚          â”‚
â”‚â”€â”€Payâ”€â”€â”€â”€â–ºâ”‚          â”‚          â”‚          â”‚          â”‚
â”‚ on VNPay â”‚          â”‚          â”‚          â”‚          â”‚
â”‚    â”‚     â”‚          â”‚          â”‚          â”‚          â”‚
â”‚    â”‚     â”‚â—„â”€Callbackâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€Returnâ”€â”€â”¤
â”‚    â”‚     â”‚          â”‚          â”‚          â”‚          â”‚
â”‚    â”‚     â”‚ Verify   â”‚          â”‚          â”‚          â”‚
â”‚    â”‚     â”‚ Signatureâ”‚          â”‚          â”‚          â”‚
â”‚    â”‚     â”‚          â”‚          â”‚          â”‚          â”‚
â”‚    â”‚     â”‚ Update   â”‚          â”‚          â”‚          â”‚
â”‚    â”‚     â”‚ Order    â”‚          â”‚          â”‚          â”‚
â”‚    â”‚     â”‚          â”‚â”€â”€â”€â”€UPDATEâ”‚          â”‚          â”‚
â”‚    â”‚     â”‚â—„â”€200 OKâ”€â”€â”‚          â”‚          â”‚          â”‚
â”‚â—„â”€Confirmation          â”‚          â”‚          â”‚          â”‚
â”‚          â”‚          â”‚          â”‚          â”‚          â”‚
```

### 5.2 Sequence Diagram - Admin Update Product

```
Admin   Browser   AdminServlet  ProductDB  Database   FileSystem
â”‚          â”‚            â”‚          â”‚          â”‚            â”‚
â”‚â”€â”€GETâ”€â”€â”€â”€â–ºâ”‚            â”‚          â”‚          â”‚            â”‚
â”‚  Manage  â”‚            â”‚          â”‚          â”‚            â”‚
â”‚ Products â”‚            â”‚          â”‚          â”‚            â”‚
â”‚          â”‚            â”‚          â”‚          â”‚            â”‚
â”‚          â”‚â”€â”€GETâ”€â”€â”€â”€â”€â”€â–ºâ”‚          â”‚          â”‚            â”‚
â”‚          â”‚            â”‚â”€â”€Queryâ”€â”€â–ºâ”‚          â”‚            â”‚
â”‚          â”‚            â”‚          â”‚â”€â”€SELECTâ”€â–ºâ”‚            â”‚
â”‚          â”‚            â”‚          â”‚â—„â”€â”€Dataâ”€â”€â”€â”¤            â”‚
â”‚          â”‚            â”‚â—„â”€â”€Resultâ”€â”‚          â”‚            â”‚
â”‚          â”‚â—„â”€products.jsp         â”‚          â”‚ Observe     â”‚
â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚            â”‚          â”‚          â”‚            â”‚
â”‚ Edit     â”‚            â”‚          â”‚          â”‚            â”‚
â”‚ Product  â”‚            â”‚          â”‚          â”‚            â”‚
â”‚          â”‚            â”‚          â”‚          â”‚            â”‚
â”‚â”€â”€POSTâ”€â”€â”€â”€â–ºâ”‚            â”‚          â”‚          â”‚            â”‚
â”‚  Update  â”‚            â”‚          â”‚          â”‚            â”‚
â”‚          â”‚â”€â”€POSTâ”€â”€â”€â”€â”€â–ºâ”‚          â”‚          â”‚            â”‚
â”‚          â”‚            â”‚ Save     â”‚          â”‚            â”‚
â”‚          â”‚            â”‚ Images   â”‚          â”‚            â”‚
â”‚          â”‚            â”‚â”€Uploadâ”€â”€â–ºâ”‚          â”‚â”€â”€SAVEâ”€â”€â–º   â”‚
â”‚          â”‚            â”‚â—„â”€â”€OKâ”€â”€â”€â”€â”€â”‚          â”‚â—„â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚          â”‚            â”‚          â”‚          â”‚            â”‚
â”‚          â”‚            â”‚ Update   â”‚          â”‚            â”‚
â”‚          â”‚            â”‚ Product  â”‚          â”‚            â”‚
â”‚          â”‚            â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚â”€â”€UPDATEâ”€â–ºâ”‚            â”‚
â”‚          â”‚            â”‚          â”‚â—„â”€â”€OKâ”€â”€â”€â”€â”€â”¤            â”‚
â”‚          â”‚            â”‚â—„â”€â”€Successâ”‚          â”‚            â”‚
â”‚          â”‚â—„â”€200 OKâ”€â”€â”€â”€â”‚          â”‚          â”‚            â”‚
â”‚â—„â”€Redirect â”‚            â”‚          â”‚          â”‚            â”‚
â”‚          â”‚            â”‚          â”‚          â”‚            â”‚
```

---

**Document Version**: 1.0  
**Last Updated**: 2024  
**Authors**: SWP Project Team
